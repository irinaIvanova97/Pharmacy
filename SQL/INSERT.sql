BEGIN TRY
	BEGIN TRANSACTION

		DELETE FROM DRUGS_INFO
		DELETE FROM DRUGS
		DELETE FROM DEALERS
		DELETE FROM PHARMACIES_ORDERS
		DELETE FROM PHARMACY
	COMMIT
END TRY
BEGIN CATCH
	ROLLBACK
END CATCH

--INSERTING DEALERS WITH TRANSACTION--

BEGIN TRY
	BEGIN TRANSACTION

		INSERT INTO DEALERS   (NAME, DISTRIBUTOR, PHONE_NUMBER)
		VALUES ('Дилър1', 'Дистрибутор1', '0888888881')

		INSERT INTO DEALERS   (NAME, DISTRIBUTOR, PHONE_NUMBER)
		VALUES ('Дилър2', 'Дистрибутор2', '0888888882')

		INSERT INTO DEALERS   (NAME, DISTRIBUTOR, PHONE_NUMBER)
		VALUES ('Дилър3', 'Дистрибутор3', '0888888883')

	COMMIT
	END TRY
BEGIN CATCH
	ROLLBACK
END CATCH

--INSERTING DRUGS WITH TRANSACTION--

BEGIN TRY
	BEGIN TRANSACTION

		INSERT INTO DRUGS   (NAME, IMAGE)
		VALUES ('Алергозан', (SELECT BulkColumn 
		FROM Openrowset( Bulk 'D:\Pictures\Drugs\alergozan.jpg', Single_Blob) as img))

		INSERT INTO DRUGS   (NAME, IMAGE)
		VALUES ('Аналгин', (SELECT BulkColumn 
		FROM Openrowset( Bulk 'D:\Pictures\Drugs\analgin.jpg', Single_Blob) as img))

		INSERT INTO DRUGS  (NAME, IMAGE)
		VALUES ('Аспирин', (SELECT BulkColumn 
		FROM Openrowset( Bulk 'D:\Pictures\Drugs\aspirin.jpg', Single_Blob) as img))

		INSERT INTO DRUGS   (NAME, IMAGE)
		VALUES ('Ефизол', (SELECT BulkColumn 
		FROM Openrowset( Bulk 'D:\Pictures\Drugs\efizol.jpg', Single_Blob) as img))

		INSERT INTO DRUGS   (NAME, IMAGE)
		VALUES ('Фастум гел', (SELECT BulkColumn 
		FROM Openrowset( Bulk 'D:\Pictures\Drugs\fastumGel.jpg', Single_Blob) as img))

		INSERT INTO DRUGS   (NAME, IMAGE)
		VALUES ('Кафетин менструал', (SELECT BulkColumn 
		FROM Openrowset( Bulk 'D:\Pictures\Drugs\kafetinMenstrual.jpg', Single_Blob) as img))

	COMMIT
	END TRY
BEGIN CATCH
	ROLLBACK
END CATCH


--INSERTING DRUGS_INFO WITH TRANSACTION--

GO

BEGIN TRY
	BEGIN TRANSACTION

		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (5, 15.50, convert(date,'06-06-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Алергозан'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър1'))

		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (5, 15.50, convert(date,'07-06-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Алергозан'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър2'))

		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (15, 10.00, convert(date,'15-10-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Алергозан'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър3'))




		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (3, 8.00, convert(date,'08-06-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Аналгин'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър1'))

		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (5, 7.50, convert(date,'25-06-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Аналгин'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър2'))




		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (2, 2.20, convert(date,'05-05-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Аспирин'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър2'))

		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (10, 3.20, convert(date,'25-06-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Аспирин'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър3'))




		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (17, 4.50, convert(date,'26-06-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Ефизол'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър1'))




		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (8, 11.70, convert(date,'06-11-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Фастум гел'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър1'))

		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (30, 12.50, convert(date,'30-12-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Фастум гел'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър3'))





		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (5, 5.00, convert(date,'30-03-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Кафетин менструал'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър1'))

		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (15, 6.00, convert(date,'30-09-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Кафетин менструал'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър2'))

		INSERT INTO DRUGS_INFO  (NUMBER, PRICE, EXPIRY_DATE, DRUG_ID, DEALER_ID)
		VALUES (10, 5.00, convert(date,'30-06-19',5), (SELECT ID FROM DRUGS WHERE NAME = 'Кафетин менструал'), 
		(SELECT ID FROM DEALERS WHERE NAME = 'Дилър3'))

	COMMIT
	END TRY
BEGIN CATCH
	ROLLBACK
END CATCH

--INSERTING PHARMACY WITH TRANSACTION--

BEGIN TRY
	BEGIN TRANSACTION

		INSERT INTO PHARMACY   (NAME) VALUES ('Аптека1')

		INSERT INTO PHARMACY   (NAME) VALUES ('Аптека2')

		INSERT INTO PHARMACY   (NAME) VALUES ('Аптека3')

		INSERT INTO PHARMACY   (NAME) VALUES ('Аптека4')


	COMMIT
	END TRY
BEGIN CATCH
	ROLLBACK
END CATCH


--INSERTING PHARMACIES_ORDERS WITH TRANSACTION--

BEGIN TRY
	BEGIN TRANSACTION

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Алергозан', 5, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека1'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Аналгин', 3, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека1'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Аспирин', 20, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека1'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Ефизол', 12, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека2'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Фастум гел', 12, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека2'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Кафетин менструал', 5, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека3'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Алергозан', 5, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека3'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Алергозан', 10, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека3'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Алергозан', 2, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека3'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Ефизол', 6, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека4'))

		INSERT INTO PHARMACIES_ORDERS   (DRUG_NAME, NUMBER_ORDERS, PHARMACY_ID)
		VALUES ('Аспирин', 5, (SELECT ID FROM PHARMACY WHERE NAME = 'Аптека4'))

	COMMIT
	END TRY
BEGIN CATCH
	ROLLBACK
END CATCH